
# Документация к файлу stress_test.py

## Описание программы

Этот скрипт выполняет стресс-тестирование HTTP-сервера, реализующего шифрование и дешифрование с помощью шифра Цезаря.  
Цель — проверить производительность сервера при высокой нагрузке, измерить время выполнения и выявить возможные ошибки.

---

## Основные компоненты

### Подключаемые библиотеки
- `requests`: Для отправки HTTP-запросов.  
- `concurrent.futures`: Для реализации параллельного выполнения задач.  
- `time`: Для измерения времени выполнения.

### Конфигурация
- `URL_ENCRYPT`: Адрес эндпоинта для шифрования.  
- `URL_DECRYPT`: Адрес эндпоинта для дешифрования.  
- `BASE_TEXT`: Базовый текст для запросов.  
- `SHIFT`: Сдвиг для шифра Цезаря.  
- `NUM_REQUESTS`: Общее количество запросов.  
- `CONCURRENCY`: Количество параллельных потоков.

---

## Основные функции

### 1. `encrypt_request()`
Функция отправляет GET-запрос на эндпоинт `/encrypt` с текстом и сдвигом.

**Параметры**
- Нет входных параметров.

**Логика работы**
1. Формирует параметры запроса: `text` и `shift`.  
2. Отправляет запрос с помощью `requests.get`.  
3. Возвращает код состояния (`status_code`) и тело ответа (`text`).

**Пример вызова**
```python
status_code, response_text = encrypt_request()
```

---

### 2. `decrypt_request()`
Функция отправляет GET-запрос на эндпоинт `/decrypt` с текстом и сдвигом.

**Параметры**
- Нет входных параметров.

**Логика работы**
Аналогична `encrypt_request`, но используется другой URL.

**Пример вызова**
```python
status_code, response_text = decrypt_request()
```

---

### 3. `run_stress_test()`
Запускает стресс-тестирование для функций шифрования и дешифрования.

**Логика работы**
1. Записывает начальное время выполнения.  
2. Создает пул потоков с размером `CONCURRENCY`.  
3. Генерирует запросы на шифрование и дешифрование:  
   - Половина из `NUM_REQUESTS` отправляется на `/encrypt`.  
   - Половина на `/decrypt`.  
4. Ждет завершения всех запросов и проверяет их статус.  
5. Выводит общее время выполнения теста.

**Пример вызова**
```python
run_stress_test()
```

---

## Пример использования

1. Запустите HTTP-сервер, который обрабатывает запросы на `/encrypt` и `/decrypt`.  
2. Убедитесь, что параметры `URL_ENCRYPT` и `URL_DECRYPT` указывают на правильные адреса.  
3. Запустите скрипт:  
   ```bash
   python stress_test.py
   ```

---

## Ограничения

1. Сервер должен быть запущен локально на порту 8080.  
2. Требуется установить библиотеку `requests`. Установите её с помощью команды:  
   ```bash
   pip install requests
   ```

---

## Возможные улучшения

1. Добавить обработку исключений для запросов.  
2. Реализовать адаптивное распределение потоков в зависимости от нагрузки.  
3. Логировать результаты тестов для дальнейшего анализа.

